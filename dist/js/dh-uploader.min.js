(function(){function l(c){for(var a=c.files.length-1;0<=a;a--){var b=c.files[a].hash,d=document.createElement("li"),f=document.createElement("a");f.setAttribute("id",b+"-link");f.setAttribute("href",c.files[a].url);f.setAttribute("data-name",c.files[a].name);f.setAttribute("target","_blank");var e=document.createElement("p");e.setAttribute("id",b+"-name");var g=document.createElement("img");g.setAttribute("src",c.files[a].url);var h=document.createElement("button");h.innerHTML="X";h.setAttribute("data-target",
b);h.addEventListener("click",function(a){a.preventDefault();document.getElementById(this.getAttribute("data-target")).outerHTML="";a={success:!1,files:[]};for(var b=list.querySelectorAll("li"),c=0;c<b.length;c++){var d={},e=b[c].getAttribute("id");d.hash=e;d.name=document.getElementById(e+"-name").innerHTML;d.url=document.getElementById(e+"-link").getAttribute("href");a.files.push(d)}k(a,!0)});f.appendChild(g);e.appendChild(document.createTextNode(c.files[a].name));f.appendChild(e);d.appendChild(f);
d.appendChild(h);d.setAttribute("id",b);list.appendChild(d)}}function k(c,a){for(var b="\n\n",d=c.files.length-1;0<=d;d--)b+=c.files[d].name+":\n"+c.files[d].url+"\n\n";g||(b="-------- VEDLAGTE FILER --------\n"+b);dhTarget.value=a?"-------- VEDLAGTE FILER --------\n"+b:dhTarget.value+b;g=!0}function m(c){c.stopPropagation();c.preventDefault()}var g=!1,e=document.getElementById("dh-uploader-form");list=document.getElementById("dh-uploader-filelist");uploadBtn=document.getElementById("dh-uploader-btn");
input=document.getElementById("dh-uploader-input");submitBtn=document.getElementById("dh-uploader-submit");dhTarget=document.querySelector(".dh-uploader-target");uploadBtn.addEventListener("click",function(){input.click()});input.addEventListener("change",function(){submitBtn.click()});window.onbeforeunload=function(){if(1<=dhTarget.value.length)return"Er du sikker p\u00e5 at du vil g\u00e5 vekk fra siden?"};e.addEventListener("submit",function(c){m(c);c=new FormData(e);var a=new XMLHttpRequest;a.onreadystatechange=
function(){var b=a.responseText;if(a.readyState===XMLHttpRequest.DONE&&200==a.status)try{b=JSON.parse(b),b.success?(l(b),k(b,!1)):(console.log("Error, couldn't parse data as JSON."),console.log("error",b))}catch(d){console.log("Error, something went wrong while parsing data as JSON.",d),console.log("error",b)}else if(404==a.status||500==a.status)console.log("Error, status code",a.status),console.log("error",b)};a.open(e.method,e.action);a.send(c)})})();