!function(){function e(e){for(var n=e.files.length-1;n>=0;n--){var a=e.files[n].hash,r=document.createElement("li"),i=document.createElement("a");i.setAttribute("id",a+"-link"),i.setAttribute("href",e.files[n].url),i.setAttribute("data-name",e.files[n].name),i.setAttribute("target","_blank");var l=document.createElement("p");l.setAttribute("id",a+"-name");var d=document.createElement("img");d.setAttribute("src",e.files[n].thumbnail);var u=document.createElement("button");u.innerHTML="X",u.setAttribute("data-target",a),u.addEventListener("click",function(e){e.preventDefault(),document.getElementById(this.getAttribute("data-target")).outerHTML="";for(var n={success:!1,files:[]},a=list.querySelectorAll("li"),r=0;r<a.length;r++){var i={},l=a[r].getAttribute("id");i.hash=l,i.name=document.getElementById(l+"-name").innerHTML,i.url=document.getElementById(l+"-link").getAttribute("href"),n.files.push(i)}t(n,!0)}),i.appendChild(d),l.appendChild(document.createTextNode(e.files[n].name)),i.appendChild(l),r.appendChild(i),r.appendChild(u),r.setAttribute("id",a),list.appendChild(r)}}function t(e,t){for(var n="\n\n",a=e.files.length-1;a>=0;a--)n+=e.files[a].name+":\n"+e.files[a].url+"\n\n";r||(n="-------- VEDLAGTE FILER --------\n"+n),dhTarget.value=t?"-------- VEDLAGTE FILER --------\n"+n:dhTarget.value+n,r=!0}function n(e){console.log("error",e)}function a(e){e.stopPropagation(),e.preventDefault()}var r=!1,i=document.getElementById("dh-uploader-form");list=document.getElementById("dh-uploader-filelist"),uploadBtn=document.getElementById("dh-uploader-btn"),input=document.getElementById("dh-uploader-input"),submitBtn=document.getElementById("dh-uploader-submit"),dhTarget=document.querySelector(".dh-uploader-target"),uploadBtn.addEventListener("click",function(){input.click()}),input.addEventListener("change",function(){submitBtn.click()}),i.addEventListener("submit",function(r){a(r);var l=new FormData(i),d=new XMLHttpRequest;d.onreadystatechange=function(){var a=d.responseText;if(d.readyState===XMLHttpRequest.DONE&&200==d.status)try{(a=JSON.parse(a)).success?(e(a),t(a,!1)):(console.log("Error, couldn't parse data as JSON."),n(a))}catch(e){console.log("Error, something went wrong while parsing data as JSON.",e),n(a)}else 404!=d.status&&500!=d.status||(console.log("Error, status code",d.status),n(a))},d.open(i.method,i.action),d.send(l)})}();