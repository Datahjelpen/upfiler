!function(){function e(e){for(var n=e.files.length-1;n>=0;n--){var a=e.files[n].hash,r=document.createElement("li"),l=document.createElement("a");l.setAttribute("id",a+"-link"),l.setAttribute("href",e.files[n].url),l.setAttribute("data-name",e.files[n].name),l.setAttribute("target","_blank");var i=document.createElement("p");i.setAttribute("id",a+"-name");var d=document.createElement("img");d.setAttribute("src",e.files[n].url);var u=document.createElement("button");u.innerHTML="X",u.setAttribute("data-target",a),u.addEventListener("click",function(e){e.preventDefault(),document.getElementById(this.getAttribute("data-target")).outerHTML="";for(var n={success:!1,files:[]},a=list.querySelectorAll("li"),r=0;r<a.length;r++){var l={},i=a[r].getAttribute("id");l.hash=i,l.name=document.getElementById(i+"-name").innerHTML,l.url=document.getElementById(i+"-link").getAttribute("href"),n.files.push(l)}t(n,!0)}),l.appendChild(d),i.appendChild(document.createTextNode(e.files[n].name)),l.appendChild(i),r.appendChild(l),r.appendChild(u),r.setAttribute("id",a),list.appendChild(r)}}function t(e,t){for(var n="\n\n",a=e.files.length-1;a>=0;a--)n+=e.files[a].name+":\n"+e.files[a].url+"\n\n";r||(n="-------- VEDLAGTE FILER --------\n"+n),dhTarget.value=t?"-------- VEDLAGTE FILER --------\n"+n:dhTarget.value+n,r=!0}function n(e){console.log("error",e)}function a(e){e.stopPropagation(),e.preventDefault()}var r=!1,l=document.getElementById("dh-uploader-form");list=document.getElementById("dh-uploader-filelist"),uploadBtn=document.getElementById("dh-uploader-btn"),input=document.getElementById("dh-uploader-input"),submitBtn=document.getElementById("dh-uploader-submit"),dhTarget=document.querySelector(".dh-uploader-target"),uploadBtn.addEventListener("click",function(){input.click()}),input.addEventListener("change",function(){submitBtn.click()}),l.addEventListener("submit",function(r){a(r);var i=new FormData(l),d=new XMLHttpRequest;d.onreadystatechange=function(){var a=d.responseText;if(d.readyState===XMLHttpRequest.DONE&&200==d.status)try{(a=JSON.parse(a)).success?(e(a),t(a,!1)):(console.log("Error, couldn't parse data as JSON."),n(a))}catch(e){console.log("Error, something went wrong while parsing data as JSON.",e),n(a)}else 404!=d.status&&500!=d.status||(console.log("Error, status code",d.status),n(a))},d.open(l.method,l.action),d.send(i)})}();