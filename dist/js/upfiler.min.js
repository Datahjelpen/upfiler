!function(){function e(e){for(var n=e.files.length-1;n>=0;n--){var a=e.files[n].hash,r=document.createElement("li"),d=document.createElement("a");d.setAttribute("id",a+"-link"),d.setAttribute("href",e.files[n].url),d.setAttribute("data-name",e.files[n].name),d.setAttribute("target","_blank");var l=document.createElement("p");l.setAttribute("id",a+"-name");var i=document.createElement("img");i.setAttribute("src",e.files[n].url);var u=document.createElement("button");u.innerHTML="X",u.setAttribute("data-target",a),u.addEventListener("click",function(e){e.preventDefault(),document.getElementById(this.getAttribute("data-target")).outerHTML="";for(var n={success:!1,files:[]},a=list.querySelectorAll("li"),r=0;r<a.length;r++){var d={},l=a[r].getAttribute("id");d.hash=l,d.name=document.getElementById(l+"-name").innerHTML,d.url=document.getElementById(l+"-link").getAttribute("href"),n.files.push(d)}t(n,!0)}),d.appendChild(i),l.appendChild(document.createTextNode(e.files[n].name)),d.appendChild(l),r.appendChild(d),r.appendChild(u),r.setAttribute("id",a),list.appendChild(r)}}function t(e,t){for(var n="\n\n",a=e.files.length-1;a>=0;a--)n+=e.files[a].name+":\n"+e.files[a].url+"\n\n";r||(n="-------- VEDLAGTE FILER --------\n"+n),dhTarget.value=t?"-------- VEDLAGTE FILER --------\n"+n:dhTarget.value+n,r=!0}function n(e){console.log("error",e)}function a(e){e.stopPropagation(),e.preventDefault()}var r=!1,d=document.getElementById("dh-uploader-form");list=document.getElementById("dh-uploader-filelist"),uploadBtn=document.getElementById("dh-uploader-btn"),input=document.getElementById("dh-uploader-input"),submitBtn=document.getElementById("dh-uploader-submit"),dhTarget=document.querySelector(".dh-uploader-target"),uploadBtn.addEventListener("click",function(){input.click()}),input.addEventListener("change",function(){submitBtn.click()}),d.addEventListener("submit",function(r){a(r);var l=new FormData(d),i=new XMLHttpRequest;i.onreadystatechange=function(){var a=i.responseText;if(i.readyState===XMLHttpRequest.DONE&&200==i.status)try{(a=JSON.parse(a)).success?(e(a),t(a,!1)):(console.log("Error, couldn't parse data as JSON."),n(a))}catch(e){console.log("Error, something went wrong while parsing data as JSON.",e),n(a)}else 404!=i.status&&500!=i.status||(console.log("Error, status code",i.status),n(a))},i.open(d.method,d.action),i.setRequestHeader("X-API-KEY","fck5rfsZKfpdRbG4npSVz3Qz"),i.send(l)})}();